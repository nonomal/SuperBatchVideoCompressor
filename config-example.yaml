# SBVC (Super Batch Video Compressor) é…ç½®æ–‡ä»¶ç¤ºä¾‹
# å¤åˆ¶æ­¤æ–‡ä»¶ä¸º config.yaml å¹¶æ ¹æ®éœ€è¦ä¿®æ”¹
# ä¼˜å…ˆçº§ï¼šå‘½ä»¤è¡Œå‚æ•° > é…ç½®æ–‡ä»¶ > ç¨‹åºé»˜è®¤å€¼

# ============================================================
# è·¯å¾„é…ç½®
# ============================================================
paths:
  input: "/path/to/input"   # è¾“å…¥ç›®å½•
  output: "/path/to/output" # è¾“å‡ºç›®å½•
  log: "/path/to/logs"      # æ—¥å¿—ç›®å½•

  # Windows è·¯å¾„ç¤ºä¾‹ï¼š
  # input: "D:/Videos/input"
  # output: "D:/Videos/output"
  # log: "D:/Videos/logs"

# ============================================================
# ç¼–ç é…ç½®
# ============================================================
encoding:
  codec: hevc              # è¾“å‡ºç¼–ç : hevc, avc, av1
  audio_bitrate: "128k"
  
  bitrate:
    forced: 0              # å¼ºåˆ¶ç ç‡(bps)ï¼Œ0=è‡ªåŠ¨è®¡ç®—
    ratio: 0.5             # å‹ç¼©æ¯”ä¾‹
    min: 500000            # æœ€å°ç ç‡(bps)
    max_by_resolution:     # åˆ†è¾¨ç‡ç ç‡ä¸Šé™
      720: 1500000
      1080: 3000000
      1440: 5000000
      2160: 9000000

# ============================================================
# æ—¥å¿—/æ§åˆ¶å°è¾“å‡º
# ============================================================
logging:
  level: INFO            # DEBUG/INFO/WARNING/ERROR
  plain: false           # true=ç¦ç”¨å½©è‰²/è£…é¥°
  json_console: false    # true=æ§åˆ¶å°è¾“å‡º JSON è¡Œï¼Œä¾¿äºé‡‡é›†/CI
  show_progress: true    # æ˜¯å¦æ˜¾ç¤ºè¿›åº¦è¡Œ
  print_cmd: false       # æ€»æ˜¯æ‰“å°å®Œæ•´ FFmpeg å‘½ä»¤

# ============================================================
# å¸§ç‡é™åˆ¶
# ============================================================
fps:
  max: 30
  limit_on_software_decode: true   # è½¯è§£æ—¶é™å¸§
  limit_on_software_encode: true   # è½¯ç¼–æ—¶é™å¸§

# ============================================================
# ç¼–ç å™¨é…ç½®
# ============================================================
# ğŸ’¡ å·¥ä½œåŸç†ï¼š
#   - å„ç¼–ç å™¨çš„ enabled å­—æ®µè¡¨ç¤º"æƒ³ä½¿ç”¨"
#   - å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹ç¡¬ä»¶ï¼Œä¸å¯ç”¨çš„ä¼šè¢«è‡ªåŠ¨ç¦ç”¨
#   - å¯ç”¨çš„ç¡¬ä»¶ç¼–ç å™¨å¹¶å‘å¤„ç†ï¼ŒæŒ‰ä¼˜å…ˆçº§åˆ†é…ä»»åŠ¡
#   - å¤±è´¥ä»»åŠ¡è‡ªåŠ¨å›é€€ï¼šåŒç¼–ç å™¨é™çº§ â†’ å…¶ä»–ç¼–ç å™¨ â†’ CPUå…œåº•
#
# ğŸ’¡ ç¼–ç å™¨è¯´æ˜ï¼š
#   - nvenc: NVIDIA GPU (éœ€è¦ N å¡ + é©±åŠ¨)
#   - qsv: Intel Quick Sync (éœ€è¦ Intel é›†æ˜¾ + é©±åŠ¨)
#   - videotoolbox: Apple ç¡¬ä»¶ç¼–ç  (ä»… macOS)
#   - cpu: è½¯ä»¶ç¼–ç å…œåº• (æœ€æ…¢ä½†å…¼å®¹æ€§æœ€å¥½)
#
# ğŸ’¡ ä¼˜å…ˆçº§é¡ºåº: nvenc > videotoolbox > qsv > cpu

encoders:
  # NVIDIA NVENC
  nvenc:
    enabled: true          # æƒ³ç”¨å°±è®¾ trueï¼Œå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹æ˜¯å¦å¯ç”¨
    max_concurrent: 3      # å¹¶å‘ä¸Šé™

  # Intel QSV
  qsv:
    enabled: true          # æƒ³ç”¨å°±è®¾ trueï¼Œå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹æ˜¯å¦å¯ç”¨
    max_concurrent: 2

  # Apple VideoToolbox (ä»… macOS)
  videotoolbox:
    enabled: false         # macOS ç”¨æˆ·è®¾ true
    max_concurrent: 3

  # CPU è½¯ä»¶ç¼–ç  (å…œåº•)
  cpu:
    enabled: true          # å»ºè®®ä¿æŒ true ä½œä¸ºæœ€ç»ˆå…œåº•
    max_concurrent: 4
    preset: medium         # ultrafast/fast/medium/slow

# ============================================================
# è°ƒåº¦é…ç½®
# ============================================================
scheduler:
  # æ€»å¹¶å‘ä¸Šé™ (å»ºè®® = å„ç¼–ç å™¨ max_concurrent ä¹‹å’Œ)
  max_total_concurrent: 5

# ============================================================
# æ–‡ä»¶å¤„ç†
# ============================================================
files:
  min_size_mb: 100         # å°äºæ­¤å¤§å°è·³è¿‡
  keep_structure: true     # ä¿æŒç›®å½•ç»“æ„
  skip_existing: true      # è·³è¿‡å·²å­˜åœ¨çš„è¾“å‡º

# ============================================================
# é…ç½®ç¤ºä¾‹
# ============================================================
#
# ã€Windows: Nå¡ + Intelé›†æ˜¾ã€‘(æ¨èé…ç½®)
# encoders:
#   nvenc: { enabled: true, max_concurrent: 3 }
#   qsv: { enabled: true, max_concurrent: 2 }
#   cpu: { enabled: true }
# scheduler: { max_total_concurrent: 5 }
#
# ã€Windows: ä»… N å¡ã€‘
# encoders:
#   nvenc: { enabled: true, max_concurrent: 3 }
#   qsv: { enabled: false }
#   cpu: { enabled: true }
# scheduler: { max_total_concurrent: 3 }
#
# ã€macOS: Apple èŠ¯ç‰‡ã€‘
# encoders:
#   nvenc: { enabled: false }
#   qsv: { enabled: false }
#   videotoolbox: { enabled: true, max_concurrent: 3 }
#   cpu: { enabled: true }
# scheduler: { max_total_concurrent: 3 }
#
# ã€çº¯ CPU æ¨¡å¼ã€‘(æ— ç¡¬ä»¶åŠ é€Ÿ)
# encoders:
#   nvenc: { enabled: false }
#   qsv: { enabled: false }
#   cpu: { enabled: true, max_concurrent: 4 }
# scheduler: { max_total_concurrent: 4 }
